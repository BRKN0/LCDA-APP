- name: Post-config LCDA on Azure WebApp
  hosts: local
  collections:
    - azure.azcollection
  tasks:

    - name: Set App Settings
      azure.azcollection.azure_rm_webapp:
        resource_group: "{{ resource_group }}"
        name: "{{ webapp_name }}"
        app_settings: "{{ app_settings }}"
        https_only: true

    - name: Warm up app
      uri:
        url: "https://{{ webapp_name }}.azurewebsites.net/"
        method: GET
        status_code: 200
